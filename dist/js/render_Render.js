"use strict";(this.webpackChunkRust_wasm=this.webpackChunkRust_wasm||[]).push([["render"],{"./src/render/render.ts":
/*!******************************!*\
  !*** ./src/render/render.ts ***!
  \******************************/function(__unused_webpack_module,__webpack_exports__,__webpack_require__){eval('__webpack_require__.r(__webpack_exports__);\n/* harmony export */ __webpack_require__.d(__webpack_exports__, {\n/* harmony export */   "Render": function() { return /* binding */ Render; }\n/* harmony export */ });\n/* harmony import */ var structure__WEBPACK_IMPORTED_MODULE_0__ = __webpack_require__(/*! structure */ "./src/structure/index.ts");\n/* harmony import */ var webworker_rpc__WEBPACK_IMPORTED_MODULE_1__ = __webpack_require__(/*! webworker-rpc */ "./node_modules/webworker-rpc/release/index.js");\n/* harmony import */ var webworker_rpc__WEBPACK_IMPORTED_MODULE_1___default = /*#__PURE__*/__webpack_require__.n(webworker_rpc__WEBPACK_IMPORTED_MODULE_1__);\n/* harmony import */ var phaser__WEBPACK_IMPORTED_MODULE_2__ = __webpack_require__(/*! phaser */ "./node_modules/phaser/dist/phaser.js");\n/* harmony import */ var phaser__WEBPACK_IMPORTED_MODULE_2___default = /*#__PURE__*/__webpack_require__.n(phaser__WEBPACK_IMPORTED_MODULE_2__);\n/* harmony import */ var _test_scene__WEBPACK_IMPORTED_MODULE_3__ = __webpack_require__(/*! ./test.scene */ "./src/render/test.scene.ts");\nvar __extends = (undefined && undefined.__extends) || (function () {\n    var extendStatics = function (d, b) {\n        extendStatics = Object.setPrototypeOf ||\n            ({ __proto__: [] } instanceof Array && function (d, b) { d.__proto__ = b; }) ||\n            function (d, b) { for (var p in b) if (Object.prototype.hasOwnProperty.call(b, p)) d[p] = b[p]; };\n        return extendStatics(d, b);\n    };\n    return function (d, b) {\n        if (typeof b !== "function" && b !== null)\n            throw new TypeError("Class extends value " + String(b) + " is not a constructor or null");\n        extendStatics(d, b);\n        function __() { this.constructor = d; }\n        d.prototype = b === null ? Object.create(b) : (__.prototype = b.prototype, new __());\n    };\n})();\n\n\n\n\nvar Render = /** @class */ (function (_super) {\n    __extends(Render, _super);\n    function Render(config, completeFunc) {\n        var _this = _super.call(this, structure__WEBPACK_IMPORTED_MODULE_0__.RENDER_PEER) || this;\n        // this.mRenderParam = { key: PICA_RENDER_PEER, url: "", name: PICA_RENDER_NAME };\n        // this.mMainPeerParam = { key: PICA_MAIN_WORKER, url: PICA_MAIN_WORKER_URL, name: PICA_MAIN_NAME };\n        _this.launcher_config = config;\n        _this.initWorker();\n        return _this;\n    }\n    Render.prototype.initWorker = function () {\n        var _this = this;\n        // Logger.log("startLink mainpeer", this.mMainPeerParam.key, this.mMainPeerParam.url);\n        var key = new URL(structure__WEBPACK_IMPORTED_MODULE_0__.WORKER_PEER, "file:///Users/gxm/workspace/PhaserRust/src/render/render.ts");\n        var peerName = structure__WEBPACK_IMPORTED_MODULE_0__.WORKER_NAME;\n        var url = structure__WEBPACK_IMPORTED_MODULE_0__.WORKER_URL;\n        // @ts-ignore\n        this.attach(key, url, true).onceReady(function () {\n            // this.mainPeer = this.remote[key][peerName];\n            if (!_this.mainWorker) {\n                console.error("no workerPeer", key, peerName);\n                return;\n            }\n            _this.createGame();\n            console.debug("worker onReady");\n        });\n    };\n    Render.prototype.createGame = function () {\n        var _this = this;\n        this.newPhaserGame().then(function () {\n            // this.createManager();\n            _this.mainWorker.createGame(_this.launcher_config);\n        });\n    };\n    Render.prototype.newPhaserGame = function () {\n        var _this = this;\n        return new Promise(function (resolve, reject) {\n            if (_this.phaser_game) {\n                resolve(_this.phaser_game);\n            }\n            _this.phaser_config = {\n                type: Phaser.AUTO,\n                parent: _this.launcher_config.parent,\n                disableContextMenu: true,\n                transparent: false,\n                backgroundColor: 0x0,\n                fps: {\n                    target: 60,\n                },\n                dom: {\n                    createContainer: true,\n                },\n                plugins: {\n                    scene: [\n                    // {\n                    //     key: "DragonBones",\n                    //     plugin: dragonBones.phaser.plugin.DragonBonesScenePlugin,\n                    //     mapping: "dragonbone",\n                    // }\n                    ]\n                },\n                render: {\n                    pixelArt: true,\n                    roundPixels: true,\n                },\n                scale: {\n                    mode: Phaser.Scale.NONE,\n                    width: _this.launcher_config.gameWidth * _this.launcher_config.gameDpr,\n                    height: _this.launcher_config.gameHeight * _this.launcher_config.gameDpr,\n                    zoom: 1 / _this.launcher_config.gameDpr,\n                },\n            };\n            Object.assign(_this.phaser_config, _this.launcher_config);\n            _this.phaser_game = new phaser__WEBPACK_IMPORTED_MODULE_2__.Game(_this.phaser_config);\n            _this.phaser_game.scene.add("testScene", _test_scene__WEBPACK_IMPORTED_MODULE_3__.TestScene, true, { x: 0, y: 0 });\n            resolve(_this.phaser_game);\n        });\n    };\n    Object.defineProperty(Render.prototype, "mainWorker", {\n        get: function () {\n            if (!this.remote[structure__WEBPACK_IMPORTED_MODULE_0__.WORKER_PEER])\n                return null;\n            var peer = this.remote[structure__WEBPACK_IMPORTED_MODULE_0__.WORKER_PEER][structure__WEBPACK_IMPORTED_MODULE_0__.WORKER_NAME];\n            if (!peer) {\n                // throw new Error("can\'t find main worker");\n                return null;\n            }\n            return peer;\n        },\n        enumerable: false,\n        configurable: true\n    });\n    return Render;\n}(webworker_rpc__WEBPACK_IMPORTED_MODULE_1__.RPCPeer));\n\n\n\n//# sourceURL=webpack://Rust-wasm/./src/render/render.ts?')},"./src/render/test.scene.ts":
/*!**********************************!*\
  !*** ./src/render/test.scene.ts ***!
  \**********************************/function(__unused_webpack_module,__webpack_exports__,__webpack_require__){eval('__webpack_require__.r(__webpack_exports__);\n/* harmony export */ __webpack_require__.d(__webpack_exports__, {\n/* harmony export */   "TestScene": function() { return /* binding */ TestScene; }\n/* harmony export */ });\nvar __extends = (undefined && undefined.__extends) || (function () {\n    var extendStatics = function (d, b) {\n        extendStatics = Object.setPrototypeOf ||\n            ({ __proto__: [] } instanceof Array && function (d, b) { d.__proto__ = b; }) ||\n            function (d, b) { for (var p in b) if (Object.prototype.hasOwnProperty.call(b, p)) d[p] = b[p]; };\n        return extendStatics(d, b);\n    };\n    return function (d, b) {\n        if (typeof b !== "function" && b !== null)\n            throw new TypeError("Class extends value " + String(b) + " is not a constructor or null");\n        extendStatics(d, b);\n        function __() { this.constructor = d; }\n        d.prototype = b === null ? Object.create(b) : (__.prototype = b.prototype, new __());\n    };\n})();\nvar TestScene = /** @class */ (function (_super) {\n    __extends(TestScene, _super);\n    function TestScene(config) {\n        return _super.call(this, config) || this;\n    }\n    TestScene.prototype.create = function () {\n        // const js = import("../../lib/Rust_wasm.js");\n        // js.then(js => {\n        //     js.greet("WebAssembly");\n        // });\n        var grap = this.add.graphics(undefined);\n        grap.fillStyle(0xffcc00, 1);\n        grap.fillCircle(100, 100, 15);\n    };\n    return TestScene;\n}(Phaser.Scene));\n\n\n\n//# sourceURL=webpack://Rust-wasm/./src/render/test.scene.ts?')},"./src/structure/const.ts":
/*!********************************!*\
  !*** ./src/structure/const.ts ***!
  \********************************/function(__unused_webpack_module,__webpack_exports__,__webpack_require__){eval('__webpack_require__.r(__webpack_exports__);\n/* harmony export */ __webpack_require__.d(__webpack_exports__, {\n/* harmony export */   "RENDER_NAME": function() { return /* binding */ RENDER_NAME; },\n/* harmony export */   "RENDER_PEER": function() { return /* binding */ RENDER_PEER; },\n/* harmony export */   "WORKER_NAME": function() { return /* binding */ WORKER_NAME; },\n/* harmony export */   "WORKER_PEER": function() { return /* binding */ WORKER_PEER; },\n/* harmony export */   "WORKER_URL": function() { return /* binding */ WORKER_URL; }\n/* harmony export */ });\nvar RENDER_PEER = "renderPeer";\nvar WORKER_PEER = "workerPeer";\n// webworker_rpc中直接使用的传入路径  支持相对路径\nvar WORKER_URL = "./js/worker.js";\n// https://webpack.docschina.org/configuration/optimization/#optimizationconcatenatemodules\n// production环境下， webpack concatenateModules默认true。\n// 合并模块名导致production和development work name不一致\n// export const RENDER_NAME = "render_Render";\n// export const NAME = "peer_MainPeer";\nvar RENDER_NAME = "Render";\nvar WORKER_NAME = "MainWorker";\n\n\n//# sourceURL=webpack://Rust-wasm/./src/structure/const.ts?')},"./src/structure/index.ts":
/*!********************************!*\
  !*** ./src/structure/index.ts ***!
  \********************************/function(__unused_webpack_module,__webpack_exports__,__webpack_require__){eval('__webpack_require__.r(__webpack_exports__);\n/* harmony export */ __webpack_require__.d(__webpack_exports__, {\n/* harmony export */   "RENDER_NAME": function() { return /* reexport safe */ _const__WEBPACK_IMPORTED_MODULE_0__.RENDER_NAME; },\n/* harmony export */   "RENDER_PEER": function() { return /* reexport safe */ _const__WEBPACK_IMPORTED_MODULE_0__.RENDER_PEER; },\n/* harmony export */   "WORKER_NAME": function() { return /* reexport safe */ _const__WEBPACK_IMPORTED_MODULE_0__.WORKER_NAME; },\n/* harmony export */   "WORKER_PEER": function() { return /* reexport safe */ _const__WEBPACK_IMPORTED_MODULE_0__.WORKER_PEER; },\n/* harmony export */   "WORKER_URL": function() { return /* reexport safe */ _const__WEBPACK_IMPORTED_MODULE_0__.WORKER_URL; }\n/* harmony export */ });\n/* harmony import */ var _const__WEBPACK_IMPORTED_MODULE_0__ = __webpack_require__(/*! ./const */ "./src/structure/const.ts");\n\n\n\n//# sourceURL=webpack://Rust-wasm/./src/structure/index.ts?')}}]);